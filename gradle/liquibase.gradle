if (!project.hasProperty("runList"))
{
  project.ext.runList = "main"
}

project.ext.diffChangelogFile = "src/main/resources/config/liquibase/changelog/" + new Date().format("yyyy-MM-dd_HH-mm-ss") + "_changelog.xml"

liquibase {
  activities {
    main {
      driver "org.h2.Driver"
      url "jdbc:h2:file:./build/h2db/db/minhshop"
      username "MinhShop"
      password ""
      changeLogFile "src/main/resources/config/liquibase/changelog/master.xml"
      defaultSchemaName ""
      logLevel "debug"
      classpath "src/main/resources/"
    }
    diffLog {
      driver "org.h2.Driver"
      url "jdbc:h2:file:./build/h2db/db/minhshop"
      username "MinhShop"
      password ""
      changeLogFile "src/main/resources/config/liquibase/master.xml"
      referenceUrl "hibernate:spring:org.regitiny.minhshop.domain?dialect=org.hibernate.dialect.H2Dialect&hibernate.physical_naming_strategy=org.springframework.boot.orm.jpa.hibernate.SpringPhysicalNamingStrategy&hibernate.implicit_naming_strategy=org.springframework.boot.orm.jpa.hibernate.SpringImplicitNamingStrategy"
      defaultSchemaName ""
      logLevel "debug"
      classpath "src/main/resources/"
    }
    if (project.hasProperty('server.address') && project.hasProperty("server.mariadb.username") &&
      project.hasProperty("server.mariadb.password") && project.hasProperty('server.mariadb.port'))
    {
      minhshop {
        driver "org.mariadb.jdbc.Driver"
        url "jdbc:mariadb://${project.property('server.address')}:${project.property('server.mariadb.port')}/minhshop?useLegacyDatetimeCode=false&serverTimezone=UTC"
        username project.property("server.mariadb.username")
        password project.property("server.mariadb.password")
        changeLogFile "src/main/resources/config/liquibase/master.xml"
        defaultSchemaName ""
        logLevel "debug"
        classpath "src/main/resources/"
      }
    }
  }

  runList = project.ext.runList
}


// bản chưa sửa
//
//if (!project.hasProperty("runList"))
//{
//  project.ext.runList = "main"
//}
//
//project.ext.diffChangelogFile = "src/main/resources/config/liquibase/changelog/" + new Date().format("yyyyMMddHHmmss") + "_changelog.xml"
//
//liquibase {
//  activities {
//    main {
//      driver "org.h2.Driver"
//      url "jdbc:h2:file:./build/h2db/db/minhshop"
//      username "MinhShop"
//      password ""
//      changeLogFile "src/main/resources/config/liquibase/master.xml"
//      defaultSchemaName ""
//      logLevel "debug"
//      classpath "src/main/resources/"
//    }
//    diffLog {
//      driver "org.h2.Driver"
//      url "jdbc:h2:file:./build/h2db/db/minhshop"
//      username "MinhShop"
//      password ""
//      changeLogFile project.ext.diffChangelogFile
//      referenceUrl "hibernate:spring:org.regitiny.minhshop.domain?dialect=org.hibernate.dialect.H2Dialect&hibernate.physical_naming_strategy=org.springframework.boot.orm.jpa.hibernate.SpringPhysicalNamingStrategy&hibernate.implicit_naming_strategy=org.springframework.boot.orm.jpa.hibernate.SpringImplicitNamingStrategy"
//      defaultSchemaName ""
//      logLevel "debug"
//      classpath "$buildDir/classes/java/main"
//    }
//    if (project.hasProperty('server.address') && project.hasProperty("server.mariadb.username") &&
//      project.hasProperty("server.mariadb.password") && project.hasProperty('server.mariadb.port'))
//    {
//      minhshop {
//        driver "org.mariadb.jdbc.Driver"
//        url "jdbc:mariadb://${project.property('server.address')}:${project.property('server.mariadb.port')}/minhshop?useLegacyDatetimeCode=false&serverTimezone=UTC"
//        username project.property("server.mariadb.username")
//        password project.property("server.mariadb.password")
//        changeLogFile "src/main/resources/config/liquibase/master.xml"
//        defaultSchemaName ""
//        logLevel "debug"
//        classpath "src/main/resources/"
//      }
//    }
//  }
//
//  runList = project.ext.runList
//}